(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{62:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return l})),a.d(t,"rightToc",(function(){return c})),a.d(t,"default",(function(){return o}));var n=a(2),r=a(6),b=(a(0),a(96)),i={id:"api",title:"API",sidebar_label:"API"},l={unversionedId:"developers/api",id:"developers/api",isDocsHomePage:!1,title:"API",description:"Charter has a number of APIs and integrations that you can integrate with if you operate your own system.",source:"@site/docs/developers/api.md",permalink:"/docs/developers/api",sidebar_label:"API",sidebar:"sidebar",previous:{title:"Field types",permalink:"/docs/reference/fieldtypes"}},c=[{value:"Authentication",id:"authentication",children:[]},{value:"Rest API",id:"rest-api",children:[{value:"General Usage",id:"general-usage",children:[]},{value:"Projects",id:"projects",children:[]},{value:"Scripts",id:"scripts",children:[]},{value:"Run groups",id:"run-groups",children:[]},{value:"Runs",id:"runs",children:[]},{value:"Participants",id:"participants",children:[]},{value:"Profiles",id:"profiles",children:[]}]},{value:"RPC API",id:"rpc-api",children:[{value:"Apply action",id:"apply-action",children:[]},{value:"Apply event",id:"apply-event",children:[]}]},{value:"View API",id:"view-api",children:[{value:"Get player view",id:"get-player-view",children:[]}]}],p={rightToc:c};function o(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(b.b)("wrapper",Object(n.a)({},p,a,{components:t,mdxType:"MDXLayout"}),Object(b.b)("p",null,"Charter has a number of APIs and integrations that you can integrate with if you operate your own system."),Object(b.b)("h2",{id:"authentication"},"Authentication"),Object(b.b)("p",null,"You can get a day-long JWT token for accessing the Charter APIs from the login endpoint using your email and password (this example uses ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://stedolan.github.io/jq/"}),"jq"),")."),Object(b.b)("pre",null,Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-sh"}),'curl https://charter.firstperson.travel/auth/login \\\n  -s -H \'Content-Type: application/json\' -X POST \\\n  --data \'{"email": "EMAIL", "password": "PASSWORD"}\' | jq -r .data.jwt\n')),Object(b.b)("p",null,"Use your token by passing it as a Bearer token using the authorization header in your requests; i.e. ",Object(b.b)("inlineCode",{parentName:"p"},"Authorization: Bearer <token>"),"."),Object(b.b)("p",null,"The login endpoint will also return the list of workspaces (or ",Object(b.b)("inlineCode",{parentName:"p"},"orgs")," in the API) that your user has access to. You'll need to use the numeric ID of your desired workspace as the ",Object(b.b)("inlineCode",{parentName:"p"},"orgId")," parameter in API calls."),Object(b.b)("pre",null,Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "data": {\n    "orgs": [{\n      "id": 0,\n      "name": "your-workspace",\n      "title": "Your Workspace"\n    }]\n  }\n}\n')),Object(b.b)("h2",{id:"rest-api"},"Rest API"),Object(b.b)("p",null,"Use the REST API for retrieving and making updates to Charter objects."),Object(b.b)("h3",{id:"general-usage"},"General Usage"),Object(b.b)("p",null,"All endpoints accept query parameters in the URL for filters. Updates should be JSON-encoded in the body of your ",Object(b.b)("inlineCode",{parentName:"p"},"PATCH")," or ",Object(b.b)("inlineCode",{parentName:"p"},"POST")," request."),Object(b.b)("p",null,"All endpoints require an ",Object(b.b)("inlineCode",{parentName:"p"},"orgId")," query parameter matching the numeric ID of your workspace. Many endpoints also require an ",Object(b.b)("inlineCode",{parentName:"p"},"experienceId")," parameter matching the ID of your project."),Object(b.b)("h4",{id:"list"},"List"),Object(b.b)("p",null,"Use the list endpoint to query for a set of resources matching desired parameters."),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("inlineCode",{parentName:"li"},"count"),": Number of records to return. Defaults to 250."),Object(b.b)("li",{parentName:"ul"},Object(b.b)("inlineCode",{parentName:"li"},"offset"),": Offset used for pagination. Defaults to 0."),Object(b.b)("li",{parentName:"ul"},Object(b.b)("inlineCode",{parentName:"li"},"sort"),": Sort by a specific field. Preface with ",Object(b.b)("inlineCode",{parentName:"li"},"-")," to sort descending.")),Object(b.b)("p",null,"You may pass in a field name to filter by values of that field. You can filter by numeric, string, date, or boolean values. You can search by multiple values by separating by commas."),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("inlineCode",{parentName:"li"},"GET /api/trips?orgId=1")," will return all trips belonging to workspace ",Object(b.b)("inlineCode",{parentName:"li"},"1"),"."),Object(b.b)("li",{parentName:"ul"},Object(b.b)("inlineCode",{parentName:"li"},"GET /api/participants?isArchived=false")," will return all unarchived participants."),Object(b.b)("li",{parentName:"ul"},Object(b.b)("inlineCode",{parentName:"li"},"GET /api/participants?name=Alice,Bob,Charles")," will return all participants with one of the three specified names."),Object(b.b)("li",{parentName:"ul"},Object(b.b)("inlineCode",{parentName:"li"},"GET /api/groups?date=2020-03-03")," will return all run groups matching the specified date.")),Object(b.b)("p",null,"You may include range searches with operation suffixes: ",Object(b.b)("inlineCode",{parentName:"p"},"eq"),", ",Object(b.b)("inlineCode",{parentName:"p"},"gt"),", ",Object(b.b)("inlineCode",{parentName:"p"},"gte"),", ",Object(b.b)("inlineCode",{parentName:"p"},"lt"),", and ",Object(b.b)("inlineCode",{parentName:"p"},"lte"),". ",Object(b.b)("inlineCode",{parentName:"p"},"GET /api/groups?date__gte=2020-03-03")," will return all run groups equal to or after the 3rd of March."),Object(b.b)("h4",{id:"create"},"Create"),Object(b.b)("p",null,"Calls to the create endpoint should include all fields JSON encoded in the POST body."),Object(b.b)("h4",{id:"retrieve"},"Retrieve"),Object(b.b)("h4",{id:"update"},"Update"),Object(b.b)("p",null,"Updates may be partial. Fields not included in the PATCH body will remain unchanged."),Object(b.b)("h3",{id:"projects"},"Projects"),Object(b.b)("p",null,"Run groups use the resource name ",Object(b.b)("inlineCode",{parentName:"p"},"experience")," in the API due to legacy naming. Project endpoints require the ",Object(b.b)("inlineCode",{parentName:"p"},"orgId")," query parameter."),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Field"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Type"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"orgId")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the workspace this project belongs to.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"createdAt")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"ISO-8601 timestamp"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"When this project was created.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"name")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"A URL-compatible (lowercase-dashed) version of the title.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"title")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The project title for display.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"timezone")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The default project timezone.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"domain"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Custom URL domain for this project.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"isArchived"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Has this project been archived.")))),Object(b.b)("h4",{id:"list-projects-get-apiexperiences"},"List projects ",Object(b.b)("inlineCode",{parentName:"h4"},"GET /api/experiences")),Object(b.b)("h4",{id:"create-project-post-apiexperiences"},"Create project ",Object(b.b)("inlineCode",{parentName:"h4"},"POST /api/experiences")),Object(b.b)("h4",{id:"retrieve-project-get-apiexperiencesid"},"Retrieve project ",Object(b.b)("inlineCode",{parentName:"h4"},"GET /api/experiences/:id")),Object(b.b)("h4",{id:"update-project-patch-apiexperiencesid"},"Update project ",Object(b.b)("inlineCode",{parentName:"h4"},"PATCH /api/experiences/:id")),Object(b.b)("h3",{id:"scripts"},"Scripts"),Object(b.b)("p",null,"Script endpoints require the ",Object(b.b)("inlineCode",{parentName:"p"},"orgId")," and ",Object(b.b)("inlineCode",{parentName:"p"},"experienceId")," query parameters. Each script is a revision of a particular project."),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Field"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Type"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"orgId")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the workspace this project belongs to.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"experienceId")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the project this script belongs to.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"createdAt")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"ISO-8601 timestamp"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"When this project was created.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"updatedAt")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"ISO-8601 timestamp"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"When this project was last updated.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"revision")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The revision number")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"content")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"object"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The contents of the script")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"isActive"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Is this script currently live.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"isLocked"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Is this script locked from editing.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"isArchived"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Is this script archived.")))),Object(b.b)("h4",{id:"list-scripts-get-apiscripts"},"List scripts ",Object(b.b)("inlineCode",{parentName:"h4"},"GET /api/scripts")),Object(b.b)("h4",{id:"create-script-post-apiscripts"},"Create script ",Object(b.b)("inlineCode",{parentName:"h4"},"POST /api/scripts")),Object(b.b)("h4",{id:"retrieve-script-get-apiscriptid"},"Retrieve script ",Object(b.b)("inlineCode",{parentName:"h4"},"GET /api/script/:id")),Object(b.b)("h4",{id:"update-script-patch-apiscriptid"},"Update script ",Object(b.b)("inlineCode",{parentName:"h4"},"PATCH /api/script/:id")),Object(b.b)("h3",{id:"run-groups"},"Run groups"),Object(b.b)("p",null,"Run groups use the resource name ",Object(b.b)("inlineCode",{parentName:"p"},"group")," in the API due to legacy naming. Run group endpoints require the ",Object(b.b)("inlineCode",{parentName:"p"},"orgId")," and ",Object(b.b)("inlineCode",{parentName:"p"},"experienceId")," query parameters."),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Field"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Type"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"orgId")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the workspace this project belongs to.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"experienceId")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the project this script belongs to.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"scriptId")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the script this run group is based on.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"date")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"date"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The date of this run group.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"isArchived"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Is this run group archived.")))),Object(b.b)("h4",{id:"list-run-groups-get-apigroups"},"List run groups ",Object(b.b)("inlineCode",{parentName:"h4"},"GET /api/groups")),Object(b.b)("h4",{id:"create-run-group-post-apigroups"},"Create run group ",Object(b.b)("inlineCode",{parentName:"h4"},"POST /api/groups")),Object(b.b)("h4",{id:"retrieve-run-group-get-apigroupsid"},"Retrieve run group ",Object(b.b)("inlineCode",{parentName:"h4"},"GET /api/groups/:id")),Object(b.b)("h4",{id:"update-run-group-patch-apigroupsid"},"Update run group ",Object(b.b)("inlineCode",{parentName:"h4"},"PATCH /api/groups/:id")),Object(b.b)("h3",{id:"runs"},"Runs"),Object(b.b)("p",null,"Runs use the resource name ",Object(b.b)("inlineCode",{parentName:"p"},"trip")," in the API due to legacy naming. Run endpoints require the ",Object(b.b)("inlineCode",{parentName:"p"},"orgId")," and ",Object(b.b)("inlineCode",{parentName:"p"},"experienceId")," query parameters."),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Field"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Type"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"orgId")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the workspace this project belongs to.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"experienceId")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the project this script belongs to.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"scriptId")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the script this run group is based on.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"groupId")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the run group this run\xa0belongs to.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"createdAt")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"ISO-8601 timestamp"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"When this project was created.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"updatedAt")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"ISO-8601 timestamp"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"When this project was last updated.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"title")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The display title of this run.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"date")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"date"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The date of this run.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"variantNames"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"A comma-separated list of active variants.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"tripState"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"object"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Key run state like the current scene and active pages for each role.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"customizations"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"object"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Run customizations set by defaults or staff.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"values"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"object"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Run values as updated by defaults or in-run actions.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"waypointOptions"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"object"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The active location for each place.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"schedule"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"object"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Clock times corresponding to each moment in the run.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"history"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"object"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"A history of each behavior in the run and when it was last triggered.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"isArchived"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Is this run archived.")))),Object(b.b)("h4",{id:"list-runs-get-apitrips"},"List runs ",Object(b.b)("inlineCode",{parentName:"h4"},"GET /api/trips")),Object(b.b)("h4",{id:"create-run-post-apitrips"},"Create run ",Object(b.b)("inlineCode",{parentName:"h4"},"POST /api/trips")),Object(b.b)("h4",{id:"retrieve-run-get-apitripid"},"Retrieve run ",Object(b.b)("inlineCode",{parentName:"h4"},"GET /api/trip/:id")),Object(b.b)("h4",{id:"update-run-patch-apitripid"},"Update run ",Object(b.b)("inlineCode",{parentName:"h4"},"PATCH /api/trip/:id")),Object(b.b)("h3",{id:"participants"},"Participants"),Object(b.b)("p",null,"Participant endpoints require the ",Object(b.b)("inlineCode",{parentName:"p"},"orgId")," and ",Object(b.b)("inlineCode",{parentName:"p"},"experienceId")," query parameters."),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Field"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Type"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"orgId")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the workspace this project belongs to.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"experienceId")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the project this script belongs to.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"createdAt")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"ISO-8601 timestamp"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"When this project was created.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"name"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Full name.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"email"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Email.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"phoneNumber"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Phone number.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"isActive"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Can this participant be added to new runs.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"isArchived"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Is this script archived.")))),Object(b.b)("h4",{id:"list-participants-get-apiparticipants"},"List participants ",Object(b.b)("inlineCode",{parentName:"h4"},"GET /api/participants")),Object(b.b)("h4",{id:"create-participant-post-apiparticipants"},"Create participant ",Object(b.b)("inlineCode",{parentName:"h4"},"POST /api/participants")),Object(b.b)("h4",{id:"retrieve-participant-get-apiparticipantid"},"Retrieve participant ",Object(b.b)("inlineCode",{parentName:"h4"},"GET /api/participant/:id")),Object(b.b)("h4",{id:"update-participant-patch-apiparticipantid"},"Update participant ",Object(b.b)("inlineCode",{parentName:"h4"},"PATCH /api/participant/:id")),Object(b.b)("h3",{id:"profiles"},"Profiles"),Object(b.b)("p",null,"Profile endpoints require the ",Object(b.b)("inlineCode",{parentName:"p"},"orgId")," and ",Object(b.b)("inlineCode",{parentName:"p"},"experienceId")," query parameters. Profiles allow the attachment of metadata to each participant's involvement with a certain role."),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Field"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Type"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"orgId")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the workspace this project belongs to.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"experienceId")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the project this script belongs to.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"participantId")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the participant this profile belongs to.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"roleName")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The name of a role in the script content.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"values"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"object"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Values to be added to the run state if this profile is used.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"isActive"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Can this participant be added to new runs.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"isArchived"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Is this script archived.")))),Object(b.b)("h4",{id:"list-profiles-get-apiprofiles"},"List profiles ",Object(b.b)("inlineCode",{parentName:"h4"},"GET /api/profiles")),Object(b.b)("h4",{id:"create-profile-post-apiprofiles"},"Create profile ",Object(b.b)("inlineCode",{parentName:"h4"},"POST /api/profiles")),Object(b.b)("h4",{id:"retrieve-profile-get-apiprofileid"},"Retrieve profile ",Object(b.b)("inlineCode",{parentName:"h4"},"GET /api/profile/:id")),Object(b.b)("h4",{id:"update-profile-patch-apiprofileid"},"Update profile ",Object(b.b)("inlineCode",{parentName:"h4"},"PATCH /api/profile/:id")),Object(b.b)("h2",{id:"rpc-api"},"RPC API"),Object(b.b)("p",null,"Use the RPC API for triggering actions or events on your runs."),Object(b.b)("h3",{id:"apply-action"},"Apply action"),Object(b.b)("p",null,"Use the apply action endpoint to trigger a particular action in your run: ",Object(b.b)("inlineCode",{parentName:"p"},"POST /api/trips/:id/actions"),"."),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Field"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Type"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"player_id")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the player making the action")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"name")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The name of the action being applied.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"params")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"object"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Parameters to the action.")))),Object(b.b)("h3",{id:"apply-event"},"Apply event"),Object(b.b)("p",null,"Use the apply event endpoint to trigger a particular event in your run: ",Object(b.b)("inlineCode",{parentName:"p"},"POST /api/trips/:id/events"),"."),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Field"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Type"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"player_id")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the player making the action")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"type")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The type of event being applied.")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(b.b)("strong",{parentName:"td"},"*")),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Include all other fields of the event as named parameters.")))),Object(b.b)("h2",{id:"view-api"},"View API"),Object(b.b)("p",null,"The View API can be used to create thin display clients for showing Charter content. The View API exposes information only about the currently visible pages and panels for a particular player, meaning that the client does not need to evaluate any conditionals or template any text on its own."),Object(b.b)("h3",{id:"get-player-view"},"Get player view"),Object(b.b)("p",null,"The get player view endpoint will expose the currently visible tabs, pages, and panels, for a player: ",Object(b.b)("inlineCode",{parentName:"p"},"GET /api/view/player/:id"),"."),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"Warning: this API is only partially implemented.")),Object(b.b)("p",null,"Example response:"),Object(b.b)("pre",null,Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "data": {\n    "interface": {\n      "headline": "Wait for player to show up at lounge",\n      "style": {\n        "background_color": "#ffffff",\n        "accent_color": "#666666",\n        "primary_color": "#aa0000",\n        "font_family": "Raleway",\n        "custom_css": ""\n      },\n      "tabs": [\n        {\n          "title": "Main",\n          "panels": [\n            {\n              "id": 1,\n              "type": "text",\n              "data": {\n                "text": "This page will update when the player is at the lounge."\n              }\n            }\n          ]\n        }\n      ]\n    }\n  }\n}\n')))}o.isMDXComponent=!0},96:function(e,t,a){"use strict";a.d(t,"a",(function(){return j})),a.d(t,"b",(function(){return u}));var n=a(0),r=a.n(n);function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){b(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},b=Object.keys(e);for(n=0;n<b.length;n++)a=b[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(e);for(n=0;n<b.length;n++)a=b[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=r.a.createContext({}),o=function(e){var t=r.a.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},j=function(e){var t=o(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},O={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,b=e.originalType,i=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),j=o(a),d=n,u=j["".concat(i,".").concat(d)]||j[d]||O[d]||b;return a?r.a.createElement(u,l(l({ref:t},p),{},{components:a})):r.a.createElement(u,l({ref:t},p))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var b=a.length,i=new Array(b);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var p=2;p<b;p++)i[p]=a[p];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);